{"version":3,"sources":["Utils/SearchApi.jsx","components/Container/Container.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js"],"names":["axios","defaults","baseURL","Container","children","className","Searchbar","onSubmit","useState","query","setQuery","value","e","preventDefault","target","type","autoComplete","autoFocus","placeholder","onChange","ImageGalleryItem","hits","imageClick","map","hit","onClick","src","webformatURL","alt","tags","data-source","largeImageURL","id","ImageGallery","Button","modalRoot","document","querySelector","Modal","toggleModal","handleKeydown","code","useEffect","window","addEventListener","removeEventListener","createPortal","currentTarget","App","searchHits","setSearchHits","searchQuery","setSearchQuery","page","setPage","isLoading","setIsLoading","error","setError","searchImage","setSearchImage","showModal","setShowModal","fetchHits","options","perPage","get","then","response","data","fetchImages","scrollTo","top","documentElement","scrollHeight","behavior","catch","finally","dataset","source","color","height","width","style","marginRight","marginLeft","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bc467622.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst API_KEY = '20350102-ed832d5aeaea3e1e1304ff4e5';\n\nexport const fetchImages = ({ searchQuery = '', page = 1, perPage = 12 }) => {\n  return axios\n    .get(\n      `?q=${searchQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\n    )\n    .then(response => response.data);\n};\n","import React from 'react';\nimport './Container.modules.css';\n\nconst Container = ({ children }) => <div className=\"App\">{children}</div>;\n\nexport default Container;\n","import React, { useState } from 'react';\nimport './Searchbar.modules.css';\n\nfunction Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setQuery(e.target.value);\n    onSubmit(query);\n  };\n\n  const handleChange = e => {\n    setQuery(e.target.value);\n  };\n\n  return (\n    <header className=\"Searchbar\">\n      <form className=\"SearchForm\" value={query} onSubmit={handleSubmit}>\n        <label>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={handleChange}\n          />\n        </label>\n      </form>\n    </header>\n  );\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport './ImageGalleryItem.modules.css';\n\nconst ImageGalleryItem = ({ hits, imageClick }) =>\n  hits.map(hit => (\n    <li key={hit.id} className=\"ImageGalleryItem\">\n      <img\n        onClick={imageClick}\n        src={hit.webformatURL}\n        alt={hit.tags}\n        data-source={hit.largeImageURL}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  ));\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport './ImageGallery.modules.css';\n\nconst ImageGallery = ({ hits, imageClick }) => (\n  <ul className=\"ImageGallery\">\n    <ImageGalleryItem hits={hits} imageClick={imageClick} />\n  </ul>\n);\n\nexport default ImageGallery;\n","import React from 'react';\nimport './Button.modules.css';\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className=\"Button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","import React, { useEffect } from 'react';\r\nimport './Modal.modules.css';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nconst Modal = ({ children, toggleModal }) => {\r\n  const handleKeydown = e => {\r\n    // console.log('нажали ESC');\r\n    if (e.code === 'Escape') {\r\n      toggleModal();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // console.log('addEventListener');\r\n    window.addEventListener('keydown', handleKeydown);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // console.log('removeEventListener');\r\n    return () => window.removeEventListener('keydown', handleKeydown);\r\n  });\r\n\r\n  const handleOverlayClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      toggleModal();\r\n    }\r\n  };\r\n\r\n  return createPortal(\r\n    <div className=\"Overlay\" onClick={handleOverlayClick}>\r\n      <div className=\"Modal\">{children}</div>\r\n    </div>,\r\n    modalRoot,\r\n  );\r\n};\r\nexport default Modal;\r\n","import React, { useState, useEffect } from 'react';\nimport { fetchImages } from './Utils/SearchApi';\nimport Loader from 'react-loader-spinner';\n\n\nimport Container from './components/Container/Container';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\n\nfunction App() {\n  const [searchHits, setSearchHits] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [searchImage, setSearchImage] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n\n  useEffect(() => {\n    if (searchQuery) {\n      fetchHits();\n    }\n  }, [searchQuery]);\n\n  const onChangeQuery = query => {\n    // console.log(query);\n    setSearchQuery(query);\n    setSearchHits([]);\n    setPage(1);\n    setError(null);\n  };\n\n  const fetchHits = () => {\n    const options = {\n      searchQuery,\n      page,\n    };\n\n    setIsLoading(true);\n\n    fetchImages(options)\n      .then(({ hits }) => {\n        setSearchHits([...searchHits, ...hits]);\n        setPage(page + 1);\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => setError(error))\n      .finally(() => setIsLoading(false));\n  };\n\n  const spinnerStyle = {\n    marginRight: 'auto',\n    marginLeft: 'auto',\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const imageClick = e => {\n    setSearchImage(e.currentTarget.dataset.source);\n    toggleModal();\n  };\n\n  return (\n    <Container>\n      {showModal && (\n        <Modal toggleModal={toggleModal}>\n          <img src={searchImage} alt=\"\" />\n        </Modal>\n      )}\n\n      {error && <h1>Попробуйте позже</h1>}\n      <Searchbar onSubmit={onChangeQuery} />\n      <ImageGallery hits={searchHits} imageClick={imageClick} />\n      {isLoading && (\n        <Loader\n          type=\"Rings\"\n          color=\"#00BFFF\"\n          height={120}\n          width={120}\n          style={spinnerStyle}\n        />\n      )}\n      {searchHits.length > 0 && !isLoading && <Button onClick={fetchHits} />}\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\nimport './styles.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}